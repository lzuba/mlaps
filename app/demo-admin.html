<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Bootstrap core CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

    <script src="/static/htmx.min.js" integrity="sha512-SqV24lSRcthd1Bg0Obg/W/qWhKdSsQPIV342MQd8qDeeY/gJt+2qmsLhutblQNDuUx0Xs2Jh7D8m+7S1b0wQyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 

    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/default.js"></script>
    <title>
    MLAPS Admin Page
</title>

    

  </head>
  <body class="bg-dark">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="position: inherit; border-bottom: 4px solid #fff">
      <div class="container-fluid">
        <img src="/static/MLAPS.svg" class="navbar-brand" width="2.5%" height="auto" alt="MLAPS Icon"></img>
        <a class="navbar-brand" href="#">MLAPS</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/">Index</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/access_log">Access Log</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/admin">Admin</a>
            </li>
          </ul>
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/legal_notice">Legal Notice</a>
            </li>
          </ul>
        </div>
      </div>
      <br>
      
    </nav>

    <div class="container-fluid p-5">
      <div class="row">
        
<h1 style="color: ghostwhite;">Mlaps Status</h1>
<ul class="list-group">
    
        <li class="list-group-item list-group-item-success">Database connection is Ok &#9989;</li>
    
    
    
        <li class="list-group-item list-group-item-success">Vault connection is Ok &#9989;</li>
        

</ul>
<h1 style="color: ghostwhite;">Latest Log</h1>

<pre class="pre-scrollable" style="color: ghostwhite; white-space: pre-wrap;"><code>2023-08-22 11:50:43,764 - pony.orm@log_orm - INFO - GET CONNECTION FROM THE LOCAL POOL
2023-08-22 11:50:43,767 - pony.orm@log_orm - INFO - SET foreign_key_checks = 0
2023-08-22 11:50:43,777 - pony.orm.sql@log_sql - INFO - SELECT `accesslog`.`id`, `accesslog`.`admin_kurzel`, `accesslog`.`gettime`, `accesslog`.`machine_id`, `accesslog`.`password_id`
FROM `accesslog` `accesslog`
WHERE 0 = 1
2023-08-22 11:50:43,778 - pony.orm.sql@log_sql - INFO - SELECT `auth_secret`.`id`, `auth_secret`.`role_id`, `auth_secret`.`secret_id`
FROM `auth_secret` `auth_secret`
WHERE 0 = 1
2023-08-22 11:50:43,779 - pony.orm.sql@log_sql - INFO - SELECT `checkin`.`id`, `checkin`.`uuid`, `checkin`.`mid`, `checkin`.`checkin_time`
FROM `checkin` `checkin`
WHERE 0 = 1
2023-08-22 11:50:43,779 - pony.orm.sql@log_sql - INFO - SELECT `machine`.`id`, `machine`.`hostname`, `machine`.`serialnumber`, `machine`.`enroll_time`, `machine`.`enroll_success`, `machine`.`disabled`
FROM `machine` `machine`
WHERE 0 = 1
2023-08-22 11:50:43,780 - pony.orm.sql@log_sql - INFO - SELECT `password`.`id`, `password`.`machine_id`, `password`.`password`, `password`.`status`, `password`.`password_set`, `password`.`password_received`, `password`.`password_expiry`
FROM `password` `password`
WHERE 0 = 1
2023-08-22 11:50:43,780 - pony.orm@log_orm - INFO - COMMIT
2023-08-22 11:50:43,781 - pony.orm@log_orm - INFO - SET foreign_key_checks = 1
2023-08-22 11:50:43,781 - pony.orm@log_orm - INFO - CLOSE CONNECTION
2023-08-22 11:50:43,782 - pony.orm@log_orm - INFO - GET NEW CONNECTION
2023-08-22 11:50:43,784 - pony.orm.sql@log_sql - INFO - SELECT `a`.`id`, `a`.`role_id`, `a`.`secret_id`
FROM `auth_secret` `a`
ORDER BY `a`.`id` DESC
LIMIT 1
2023-08-22 11:50:43,786 - pony.orm@log_orm - INFO - COMMIT
2023-08-22 11:50:43,787 - pony.orm@log_orm - INFO - RELEASE CONNECTION
2023-08-22 11:50:43,789 - urllib3.connectionpool@_new_conn - DEBUG - Starting new HTTP connection (1): vault:8200
2023-08-22 11:50:43,792 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;POST /v1/auth/approle/login HTTP/1.1&#34; 200 608
2023-08-22 11:50:43,794 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/auth/token/lookup-self HTTP/1.1&#34; 200 719
2023-08-22 11:50:43,795 - mlaps@__hsmlogin - DEBUG - Successfully authenticated to Vault
2023-08-22 11:50:43,795 - tzlocal@_get_localzone_name - DEBUG - /etc/timezone found, contents:
 Etc/UTC

2023-08-22 11:50:43,795 - tzlocal@_get_localzone_name - DEBUG - /etc/localtime found
2023-08-22 11:50:43,796 - tzlocal@_get_localzone_name - DEBUG - 2 found:
 {&#39;/etc/timezone&#39;: &#39;Etc/UTC&#39;, &#39;/etc/localtime is a symlink to&#39;: &#39;Etc/UTC&#39;}
2023-08-22 11:50:43,845 - apscheduler.scheduler@add_job - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2023-08-22 11:50:43,846 - apscheduler.scheduler@add_job - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2023-08-22 11:50:43,846 - apscheduler.scheduler@_real_add_job - INFO - Added job &#34;Controller.renewHsmSecret&#34; to job store &#34;default&#34;
2023-08-22 11:50:43,846 - apscheduler.scheduler@_real_add_job - INFO - Added job &#34;Controller.reLoginHsm&#34; to job store &#34;default&#34;
2023-08-22 11:50:43,846 - apscheduler.scheduler@start - INFO - Scheduler started
2023-08-22 11:50:43,847 - apscheduler.scheduler@_process_jobs - DEBUG - Looking for jobs to run
2023-08-22 11:50:43,847 - apscheduler.scheduler@_process_jobs - DEBUG - Next wakeup is due at 2023-08-22 12:49:03.846025+00:00 (in 3499.998692 seconds)
2023-08-22 11:50:43,848 - flask_oidc_ex@__init__ - DEBUG - __init__
2023-08-22 11:50:43,854 - mlaps@&lt;module&gt; - INFO - Server initialized
2023-08-22 11:50:43,856 - werkzeug@_log - WARNING -  * Debugger is active!
2023-08-22 11:50:43,857 - werkzeug@_log - INFO -  * Debugger PIN: 416-337-465
2023-08-22 11:50:56,539 - mlaps@checkHSMTokenValidity - WARNING - Illegal use of method (uses = 0), aborting
2023-08-22 11:50:56,542 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/sys/seal-status HTTP/1.1&#34; 200 298
2023-08-22 11:50:56,548 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/auth/token/lookup-self HTTP/1.1&#34; 200 719
2023-08-22 11:50:56,548 - mlaps@checkConnection - DEBUG - Connection to Vault is authenticated: True, Vault is sealed: False</code></pre>

<!-- <ul class="list-group">
    <li class="list-group-item list-group-item-danger"> 2023-08-22 11:50:43,764 - pony.orm@log_orm - INFO - GET CONNECTION FROM THE LOCAL POOL
2023-08-22 11:50:43,767 - pony.orm@log_orm - INFO - SET foreign_key_checks = 0
2023-08-22 11:50:43,777 - pony.orm.sql@log_sql - INFO - SELECT `accesslog`.`id`, `accesslog`.`admin_kurzel`, `accesslog`.`gettime`, `accesslog`.`machine_id`, `accesslog`.`password_id`
FROM `accesslog` `accesslog`
WHERE 0 = 1
2023-08-22 11:50:43,778 - pony.orm.sql@log_sql - INFO - SELECT `auth_secret`.`id`, `auth_secret`.`role_id`, `auth_secret`.`secret_id`
FROM `auth_secret` `auth_secret`
WHERE 0 = 1
2023-08-22 11:50:43,779 - pony.orm.sql@log_sql - INFO - SELECT `checkin`.`id`, `checkin`.`uuid`, `checkin`.`mid`, `checkin`.`checkin_time`
FROM `checkin` `checkin`
WHERE 0 = 1
2023-08-22 11:50:43,779 - pony.orm.sql@log_sql - INFO - SELECT `machine`.`id`, `machine`.`hostname`, `machine`.`serialnumber`, `machine`.`enroll_time`, `machine`.`enroll_success`, `machine`.`disabled`
FROM `machine` `machine`
WHERE 0 = 1
2023-08-22 11:50:43,780 - pony.orm.sql@log_sql - INFO - SELECT `password`.`id`, `password`.`machine_id`, `password`.`password`, `password`.`status`, `password`.`password_set`, `password`.`password_received`, `password`.`password_expiry`
FROM `password` `password`
WHERE 0 = 1
2023-08-22 11:50:43,780 - pony.orm@log_orm - INFO - COMMIT
2023-08-22 11:50:43,781 - pony.orm@log_orm - INFO - SET foreign_key_checks = 1
2023-08-22 11:50:43,781 - pony.orm@log_orm - INFO - CLOSE CONNECTION
2023-08-22 11:50:43,782 - pony.orm@log_orm - INFO - GET NEW CONNECTION
2023-08-22 11:50:43,784 - pony.orm.sql@log_sql - INFO - SELECT `a`.`id`, `a`.`role_id`, `a`.`secret_id`
FROM `auth_secret` `a`
ORDER BY `a`.`id` DESC
LIMIT 1
2023-08-22 11:50:43,786 - pony.orm@log_orm - INFO - COMMIT
2023-08-22 11:50:43,787 - pony.orm@log_orm - INFO - RELEASE CONNECTION
2023-08-22 11:50:43,789 - urllib3.connectionpool@_new_conn - DEBUG - Starting new HTTP connection (1): vault:8200
2023-08-22 11:50:43,792 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;POST /v1/auth/approle/login HTTP/1.1&#34; 200 608
2023-08-22 11:50:43,794 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/auth/token/lookup-self HTTP/1.1&#34; 200 719
2023-08-22 11:50:43,795 - mlaps@__hsmlogin - DEBUG - Successfully authenticated to Vault
2023-08-22 11:50:43,795 - tzlocal@_get_localzone_name - DEBUG - /etc/timezone found, contents:
 Etc/UTC

2023-08-22 11:50:43,795 - tzlocal@_get_localzone_name - DEBUG - /etc/localtime found
2023-08-22 11:50:43,796 - tzlocal@_get_localzone_name - DEBUG - 2 found:
 {&#39;/etc/timezone&#39;: &#39;Etc/UTC&#39;, &#39;/etc/localtime is a symlink to&#39;: &#39;Etc/UTC&#39;}
2023-08-22 11:50:43,845 - apscheduler.scheduler@add_job - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2023-08-22 11:50:43,846 - apscheduler.scheduler@add_job - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2023-08-22 11:50:43,846 - apscheduler.scheduler@_real_add_job - INFO - Added job &#34;Controller.renewHsmSecret&#34; to job store &#34;default&#34;
2023-08-22 11:50:43,846 - apscheduler.scheduler@_real_add_job - INFO - Added job &#34;Controller.reLoginHsm&#34; to job store &#34;default&#34;
2023-08-22 11:50:43,846 - apscheduler.scheduler@start - INFO - Scheduler started
2023-08-22 11:50:43,847 - apscheduler.scheduler@_process_jobs - DEBUG - Looking for jobs to run
2023-08-22 11:50:43,847 - apscheduler.scheduler@_process_jobs - DEBUG - Next wakeup is due at 2023-08-22 12:49:03.846025+00:00 (in 3499.998692 seconds)
2023-08-22 11:50:43,848 - flask_oidc_ex@__init__ - DEBUG - __init__
2023-08-22 11:50:43,854 - mlaps@&lt;module&gt; - INFO - Server initialized
2023-08-22 11:50:43,856 - werkzeug@_log - WARNING -  * Debugger is active!
2023-08-22 11:50:43,857 - werkzeug@_log - INFO -  * Debugger PIN: 416-337-465
2023-08-22 11:50:56,539 - mlaps@checkHSMTokenValidity - WARNING - Illegal use of method (uses = 0), aborting
2023-08-22 11:50:56,542 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/sys/seal-status HTTP/1.1&#34; 200 298
2023-08-22 11:50:56,548 - urllib3.connectionpool@_make_request - DEBUG - http://vault:8200 &#34;GET /v1/auth/token/lookup-self HTTP/1.1&#34; 200 719
2023-08-22 11:50:56,548 - mlaps@checkConnection - DEBUG - Connection to Vault is authenticated: True, Vault is sealed: False </li>
</ul>
-->


      </div>
    </div>

  </body>
</html>
